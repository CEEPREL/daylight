exports.id=138,exports.ids=[138],exports.modules={1843:(e,t,r)=>{"use strict";r.d(t,{WelcomeToast:()=>i});let i=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call WelcomeToast() from the server but WelcomeToast is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/macbookpro/Documents/ceeprel/daylight/app/components/welcome-toast.tsx","WelcomeToast")},5009:(e,t,r)=>{"use strict";function i(){return null}r.d(t,{WelcomeToast:()=>i}),r(60687),r(43210),r(52581)},9161:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b,metadata:()=>f});var i=r(37413),a=r(59258),d=r.n(a),s=r(61120),n=r(6931),l=r(40338),o=r(53384);async function c({userId:e}){let t=await (0,l.VM)(e);return t?(0,i.jsx)("div",{className:"hidden w-[350px] shrink-0 overflow-auto bg-neutral-50 p-6 sm:flex",children:(0,i.jsxs)("div",{className:"max-w-md",children:[(0,i.jsx)("h2",{className:"mb-2 text-2xl font-bold",children:`${t.firstName} ${t.lastName}`}),(0,i.jsxs)("div",{className:"mb-4 flex items-center",children:[(0,i.jsx)("img",{src:t.avatarUrl||"/placeholder.svg?height=40&width=40",alt:`${t.firstName} ${t.lastName}`,className:"mr-4 h-10 w-10 rounded-full"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-blue-600",children:t.email}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:t.location})]})]}),(0,i.jsx)("p",{className:"mb-4 text-gray-700",children:`${t.jobTitle} at ${t.company}`}),(0,i.jsx)("h3",{className:"mb-2 font-semibold",children:"Mail"}),(0,i.jsx)("ul",{className:"mb-4 space-y-1 text-sm text-gray-600",children:t.latestThreads.map((e,t)=>(0,i.jsx)("li",{children:e.subject},t))}),(0,i.jsxs)("div",{className:"space-y-2",children:[t.linkedin&&(0,i.jsxs)("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[(0,i.jsx)(o.default,{src:"/linkedin.svg",alt:"LinkedIn",width:16,height:16,className:"mr-2"}),(0,i.jsx)("span",{className:"text-sm",children:"LinkedIn"})]}),t.twitter&&(0,i.jsxs)("a",{href:t.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[(0,i.jsx)(o.default,{src:"/x.svg",alt:"X/Twitter",width:16,height:16,className:"mr-2"}),(0,i.jsx)("span",{className:"text-sm",children:"Twitter/X"})]}),t.github&&(0,i.jsxs)("a",{href:t.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[(0,i.jsx)(o.default,{src:"/github.svg",alt:"GitHub",width:16,height:16,className:"mr-2"}),(0,i.jsx)("span",{className:"text-sm",children:"GitHub"})]})]})]})}):null}var m=r(1843);r(82704);let f={title:"Next.js Mail",description:"An email client template using the Next.js App Router."};function b({children:e}){return(0,i.jsx)("html",{lang:"en",className:`bg-white text-gray-800 ${d().className}`,children:(0,i.jsxs)("body",{className:"flex h-screen",children:[(0,i.jsx)("main",{className:"grow overflow-hidden",children:e}),(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(u,{}),children:(0,i.jsx)(c,{userId:1})}),(0,i.jsx)(n.Toaster,{closeButton:!0}),(0,i.jsx)(m.WelcomeToast,{})]})})}function u(){return(0,i.jsx)("div",{className:"hidden w-[350px] shrink-0 overflow-auto bg-neutral-50 p-6 sm:flex"})}},40338:(e,t,r)=>{"use strict";r.d(t,{dA:()=>E,kc:()=>S,Rd:()=>U,YR:()=>C,du:()=>O,Y:()=>X,JA:()=>K,Fr:()=>B,VM:()=>W,U:()=>L});var i={};r.r(i),r.d(i,{emails:()=>w,emailsRelations:()=>F,folders:()=>P,foldersRelations:()=>q,threadFolders:()=>D,threadFoldersRelations:()=>R,threads:()=>g,threadsRelations:()=>$,userFolders:()=>_,userFoldersRelations:()=>J,users:()=>I,usersRelations:()=>A});var a=r(67218);r(79130);var d=r(75545),s=r(96657),n=r(94634),l=r(16048),o=r(99189),c=r(97329),m=r.n(c),f=r(65761),b=r(43971),u=r(5614),h=r(43402),v=r(50033),p=r(79252),y=r(89697),N=r(9253),j=r(63431),x=r(29334);let I=(0,h.cJ)("users",{id:(0,v.vX)("id").primaryKey(),firstName:(0,p.yf)("first_name",{length:50}),lastName:(0,p.yf)("last_name",{length:50}),email:(0,p.yf)("email",{length:255}).notNull(),jobTitle:(0,p.yf)("job_title",{length:100}),company:(0,p.yf)("company",{length:100}),location:(0,p.yf)("location",{length:100}),twitter:(0,p.yf)("twitter",{length:100}),linkedin:(0,p.yf)("linkedin",{length:100}),github:(0,p.yf)("github",{length:100}),avatarUrl:(0,p.yf)("avatar_url",{length:255})},e=>({emailIndex:(0,y.GL)("email_idx").on(e.email)})),g=(0,h.cJ)("threads",{id:(0,v.vX)("id").primaryKey(),subject:(0,p.yf)("subject",{length:255}),lastActivityDate:(0,N.vE)("last_activity_date").defaultNow()}),w=(0,h.cJ)("emails",{id:(0,v.vX)("id").primaryKey(),threadId:(0,j.nd)("thread_id").references(()=>g.id),senderId:(0,j.nd)("sender_id").references(()=>I.id),recipientId:(0,j.nd)("recipient_id").references(()=>I.id),subject:(0,p.yf)("subject",{length:255}),body:(0,x.Qq)("body"),sentDate:(0,N.vE)("sent_date").defaultNow()},e=>({threadIdIndex:(0,y.Pe)("thread_id_idx").on(e.threadId),senderIdIndex:(0,y.Pe)("sender_id_idx").on(e.senderId),recipientIdIndex:(0,y.Pe)("recipient_id_idx").on(e.recipientId),sentDateIndex:(0,y.Pe)("sent_date_idx").on(e.sentDate)})),P=(0,h.cJ)("folders",{id:(0,v.vX)("id").primaryKey(),name:(0,p.yf)("name",{length:50}).notNull()}),_=(0,h.cJ)("user_folders",{id:(0,v.vX)("id").primaryKey(),userId:(0,j.nd)("user_id").references(()=>I.id),folderId:(0,j.nd)("folder_id").references(()=>P.id)}),D=(0,h.cJ)("thread_folders",{id:(0,v.vX)("id").primaryKey(),threadId:(0,j.nd)("thread_id").references(()=>g.id),folderId:(0,j.nd)("folder_id").references(()=>P.id)}),A=(0,u.K1)(I,({many:e})=>({sentEmails:e(w,{relationName:"sender"}),receivedEmails:e(w,{relationName:"recipient"}),userFolders:e(_)})),$=(0,u.K1)(g,({many:e})=>({emails:e(w),threadFolders:e(D)})),F=(0,u.K1)(w,({one:e})=>({thread:e(g,{fields:[w.threadId],references:[g.id]}),sender:e(I,{fields:[w.senderId],references:[I.id],relationName:"sender"}),recipient:e(I,{fields:[w.recipientId],references:[I.id],relationName:"recipient"})})),q=(0,u.K1)(P,({many:e})=>({userFolders:e(_),threadFolders:e(D)})),J=(0,u.K1)(_,({one:e})=>({user:e(I,{fields:[_.userId],references:[I.id]}),folder:e(P,{fields:[_.folderId],references:[P.id]})})),R=(0,u.K1)(D,({one:e})=>({thread:e(g,{fields:[D.threadId],references:[g.id]}),folder:e(P,{fields:[D.folderId],references:[P.id]})}));if(m().config(),!process.env.POSTGRES_URL)throw Error("POSTGRES_URL environment variable is not set");let k=(0,b.A)(process.env.POSTGRES_URL),T=(0,f.f)(k,{schema:i});var E=(0,d.P)("default","807ddcce3e68b54b67e45e7f1191ce785198104fd9",0,async function(){let e=await T.select({name:P.name,thread_count:(0,s.ll)`count(${D.threadId})`.as("thread_count")}).from(P).leftJoin(D,(0,n.eq)(P.id,D.folderId)).groupBy(P.name),t=["Inbox","Flagged","Sent"];return{specialFolders:t.map(t=>e.find(e=>e.name===t)).filter(Boolean),otherFolders:e.filter(e=>!t.includes(e.name))}});Object.defineProperty(E,"name",{value:"getFoldersWithThreadCount",writable:!1}),(0,a.A)(E,"807ddcce3e68b54b67e45e7f1191ce785198104fd9",null);var S=(0,d.P)("default","c0ec4f74def46f408cb59c291f75e300767d5e4406",0,async function(e){let t=(0,o.Sn)(decodeURIComponent(e));return await T.select({id:g.id,subject:g.subject,lastActivityDate:g.lastActivityDate,emails:(0,s.ll)`json_agg(json_build_object(
        'id', ${w.id},
        'senderId', ${w.senderId},
        'recipientId', ${w.recipientId},
        'subject', ${w.subject},
        'body', ${w.body},
        'sentDate', ${w.sentDate},
        'sender', json_build_object(
          'id', ${I.id},
          'firstName', ${I.firstName},
          'lastName', ${I.lastName},
          'email', ${I.email}
        )
      ) ORDER BY ${w.sentDate} DESC)`}).from(g).innerJoin(D,(0,n.eq)(g.id,D.threadId)).innerJoin(P,(0,n.eq)(D.folderId,P.id)).innerJoin(w,(0,n.eq)(g.id,w.threadId)).innerJoin(I,(0,n.eq)(w.senderId,I.id)).where((0,n.eq)(P.name,t)).groupBy(g.id).orderBy((0,l.i)(g.lastActivityDate))});Object.defineProperty(S,"name",{value:"getThreadsForFolder",writable:!1});var B=(0,a.A)(S,"c0ec4f74def46f408cb59c291f75e300767d5e4406",null);async function L(e){if(!e)return[];let t=await T.select({id:g.id,subject:g.subject,lastActivityDate:g.lastActivityDate,folderName:P.name,emailId:w.id,emailSubject:w.subject,emailBody:w.body,emailSentDate:w.sentDate,senderFirstName:I.firstName,senderLastName:I.lastName,senderEmail:I.email}).from(g).innerJoin(w,(0,n.eq)(g.id,w.threadId)).innerJoin(I,(0,n.eq)(w.senderId,I.id)).leftJoin(D,(0,n.eq)(g.id,D.threadId)).leftJoin(P,(0,n.eq)(D.folderId,P.id)).where((0,n.or)((0,n.B3)(I.firstName,`%${e}%`),(0,n.B3)(I.lastName,`%${e}%`),(0,n.B3)(I.email,`%${e}%`),(0,n.B3)(g.subject,`%${e}%`),(0,n.B3)(w.body,`%${e}%`))).orderBy((0,l.i)(g.lastActivityDate),(0,l.i)(w.sentDate)),r=new Map;for(let e of t)r.has(e.id)||r.set(e.id,{id:e.id,subject:e.subject,lastActivityDate:e.lastActivityDate,folderName:e.folderName,latestEmail:{id:e.emailId,subject:e.emailSubject,body:e.emailBody,sentDate:e.emailSentDate,sender:{firstName:e.senderFirstName,lastName:e.senderLastName,email:e.senderEmail}}});return Array.from(r.values())}var U=(0,d.P)("default","e000042a2cc3f0e7fd9f58784a63140d86dbe47ca6",0,async function(e,t){let r=(0,o.Sn)(decodeURIComponent(e));return(await T.select({id:g.id,subject:g.subject,lastActivityDate:g.lastActivityDate,senderFirstName:I.firstName,senderLastName:I.lastName,senderEmail:I.email}).from(g).innerJoin(D,(0,n.eq)(g.id,D.threadId)).innerJoin(P,(0,n.eq)(D.folderId,P.id)).innerJoin(w,(0,n.eq)(g.id,w.threadId)).innerJoin(I,(0,n.eq)(w.senderId,I.id)).where((0,n.Uo)((0,n.eq)(P.name,r),(0,n.eq)(g.id,parseInt(t)))))[0]});Object.defineProperty(U,"name",{value:"getThreadInFolder",writable:!1}),(0,a.A)(U,"e000042a2cc3f0e7fd9f58784a63140d86dbe47ca6",null);var C=(0,d.P)("default","c009fab3842f6e93501fd21a2badcbb33e6006cfc1",0,async function(e){let t=await T.select({id:g.id,subject:g.subject,emailId:w.id,body:w.body,sentDate:w.sentDate,senderId:I.id,senderFirstName:I.firstName,senderLastName:I.lastName,recipientId:w.recipientId}).from(g).innerJoin(w,(0,n.eq)(g.id,w.threadId)).innerJoin(I,(0,n.eq)(w.senderId,I.id)).where((0,n.eq)(g.id,parseInt(e,10))).orderBy(w.sentDate);return 0===t.length?null:{id:t[0].id,subject:t[0].subject,emails:t.map(e=>({id:e.emailId,body:e.body,sentDate:e.sentDate,sender:{id:e.senderId,firstName:e.senderFirstName,lastName:e.senderLastName},recipientId:e.recipientId}))}});Object.defineProperty(C,"name",{value:"getEmailsForThread",writable:!1});var K=(0,a.A)(C,"c009fab3842f6e93501fd21a2badcbb33e6006cfc1",null),O=(0,d.P)("default","80a9d5dcd76bc6dd0ce39afbbeea3828d8ddd27b84",0,async function(){return T.select({firstName:I.firstName,lastName:I.lastName,email:I.email}).from(I)});Object.defineProperty(O,"name",{value:"getAllEmailAddresses",writable:!1}),(0,a.A)(O,"80a9d5dcd76bc6dd0ce39afbbeea3828d8ddd27b84",null);var X=(0,d.P)("default","c0487837937f2c1507543df8e80a274586253bb0de",0,async function(e){let t=await T.select({id:I.id,firstName:I.firstName,lastName:I.lastName,email:I.email,jobTitle:I.jobTitle,company:I.company,location:I.location,avatarUrl:I.avatarUrl,linkedin:I.linkedin,twitter:I.twitter,github:I.github}).from(I).where((0,n.eq)(I.id,e)).limit(1).execute();if(0===t.length)return null;let r=await T.select({subject:g.subject}).from(g).innerJoin(w,(0,n.eq)(w.threadId,g.id)).where((0,n.eq)(w.senderId,e)).orderBy((0,l.i)(g.lastActivityDate)).limit(3).execute();return{...t[0],latestThreads:r}});Object.defineProperty(X,"name",{value:"getUserProfile",writable:!1});var W=(0,a.A)(X,"c0487837937f2c1507543df8e80a274586253bb0de",null)},76148:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},79192:(e,t,r)=>{Promise.resolve().then(r.bind(r,1843)),Promise.resolve().then(r.t.bind(r,49603,23)),Promise.resolve().then(r.bind(r,6931))},80034:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"807ddcce3e68b54b67e45e7f1191ce785198104fd9":()=>i.dA,"80a9d5dcd76bc6dd0ce39afbbeea3828d8ddd27b84":()=>i.du,c009fab3842f6e93501fd21a2badcbb33e6006cfc1:()=>i.YR,c0487837937f2c1507543df8e80a274586253bb0de:()=>i.Y,c0ec4f74def46f408cb59c291f75e300767d5e4406:()=>i.kc,e000042a2cc3f0e7fd9f58784a63140d86dbe47ca6:()=>i.Rd});var i=r(40338)},82704:()=>{},88920:(e,t,r)=>{Promise.resolve().then(r.bind(r,5009)),Promise.resolve().then(r.t.bind(r,46533,23)),Promise.resolve().then(r.bind(r,52581))},94708:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},99189:(e,t,r)=>{"use strict";r.d(t,{Sn:()=>d,Sw:()=>s,rk:()=>a});var i=r(37413);function a(e,t={includeFullEmail:!1}){return e.firstName&&e.lastName?`${e.firstName} ${e.lastName} ${t.includeFullEmail?`<${e.email}>`:""}`:e.email}function d(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()})}function s(e,t){return t?e.split(RegExp(`(${t})`,"gi")).map((e,r)=>e.toLowerCase()===t.toLowerCase()?(0,i.jsx)("mark",{className:"bg-yellow-200 text-black",children:e},r):e):e}}};
//# sourceMappingURL=138.js.map